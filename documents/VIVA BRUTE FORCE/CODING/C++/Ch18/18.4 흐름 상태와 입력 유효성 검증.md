# 18.4 흐름 상태와 입력 유효성 검증



```C++

// main.cpp

#include <iostream>
#include <cctype>
#include <string>
#include <bitset>

void printCharacterClassfication(const int &i) {

    std::cout << std::boolalpha;
    std::cout << "isalnum " << bool(std::isalnum(i)) << std::endl;  // return type이 int여서 bool이 필요하다.
    std::cout << "isblank " << bool(std::isblank(i)) << std::endl;  // cctype
    std::cout << "isdigit " << bool(std::isdigit(i)) << std::endl;
    std::cout << "islower " << bool(std::islower(i)) << std::endl;
    std::cout << "isupper " << bool(std::isupper(i)) << std::endl;

}

void printStates(const std::ios &stream) {
    std::cout << std::boolalpha;
    std::cout << "good()=" << stream.good() << std::endl;
    std::cout << "eof()=" << stream.eof() << std::endl;
    std::cout << "fail()=" << stream.fail() << std::endl;
    std::cout << "bad()=" << stream.bad() << std::endl;
}

void clasifyCharacters(const std::string &str) {


    for (auto e:str) {

        std::cout << e << std::endl;
        std::cout << "isdigit " << std::isdigit(e) << std::endl;
        std::cout << "isblank " << std::isblank(e) << std::endl;
        std::cout << "isalnum " << std::isalpha(e) << std::endl;
    }
}


int main() {

    {
        while (true) {
            char i;
            std::cin >> i;
            printStates(std::cin);  // 입력이 int가 아니면 문제가 발생하므로 이를 확인한다.
//        std::cout << i << std::endl;


//        printStates(std::cin) 대신 다음을 사용할 수도 있지만 속도 향상을 보장할 수 있는 것은 아니다.
//        std::cout << std::boolalpha;
//        std::cout << std::bitset<8>(std::cin.rdstate()) << std::endl;
//        std::cout << std::bitset<8>(std::istream::goodbit) << std::endl;
//        std::cout << std::bitset<8>(std::istream::failbit) << std::endl;
//        std::cout << !bool((std::cin.rdstate() & std::istream::failbit) != 0) << std::endl;


            printCharacterClassfication(i);

            std::cin.clear();
            std::cin.ignore(1024, '\n');
            std::cout << std::endl;

        }
    }

    {
        std::cout << std::boolalpha;
        clasifyCharacters("1234");
        clasifyCharacters("a 1234");
    }


    return 0;
}



```

