# 14.3 예외 클래스와 상속



```C++

// main.cpp

#include <iostream>

class Exception {
public:
    void report() {
        std::cerr << "Exception report " << std::endl;
    }
};

class ArrayException : public Exception {
public:
    void report() {
        std::cerr << "Array exception " << std::endl;
    }
};

class MyArray {
private:
    int m_data[5];

public:
    int &operator[](const int &index) {
        // if (index < 0 || index >= 5) throw -1;
        if (index < 0 || index >= 5) throw ArrayException();

        return m_data[index];
    }
};

void doSomething() {
    MyArray my_array;
    try {
        my_array[100];
    } catch (const int &x) {
        std::cerr << "Exception " << x << std::endl;
    } catch (ArrayException &e) {

        std::cout << "doSomething()" << std::endl;
        e.report();
        throw e;    // re-throw

    } catch (Exception &e) {
        e.report();
        // throw e;
        throw;  // 객체 잘림이 발생하지 않는다. 
    }
}

int main() {

    try {
        doSomething();
    } catch (ArrayException &e) {
        std::cout << "main()" << std::endl;
        e.report();
    }

    return 0;
}

```

