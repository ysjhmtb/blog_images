YUI.add("hermes-template-mega-limit-overlay-message",function(e,a){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,n,t,l){var s,r=null!=a?a:{},i=n.helperMissing,p=e.escapeExpression;return"<h1>"+p((n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{username:null!=a?a.username:a,intlName:"common.HI_MESSAGE_GREETING"},data:l}))+"</h1>\n<p>\n\t"+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlHTMLMessage||a&&a.intlHTMLMessage||i).call(r,{name:"intlHTMLMessage",hash:{photoCountString:null!=a?a.overLimitCountString:a,rulesUrl:null!=a?a.rulesUrl:a,intlName:"upload-blocking.LIKE_TO_KEEP_YOUR_PHOTOS"},data:l}),{name:"preventOrphans",hash:{},data:l}))+'\n</p>\n<div class="button-container">\n\t<a role="button" class="button unfluid accept-button" href="'+p("function"==typeof(s=null!=(s=n.acceptUrl||(null!=a?a.acceptUrl:a))?s:i)?s.call(r,{name:"acceptUrl",hash:{},data:l}):s)+'">\n\t\t'+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"upload-blocking.JOIN_FLICKR_PRO"},data:l}),{name:"preventOrphans",hash:{},data:l}))+'\n\t</a>\n\t<button class="button unfluid alt decline-button">\n\t\t'+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"upload-blocking.DONT_SAVE_MY_PHOTOS"},data:l}),{name:"preventOrphans",hash:{},data:l}))+"\n\t</button>\n</div>\t\n"},useData:!0}),t={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/mega-limit-overlay-message",function(a,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,n(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-list-subview",function(e,t){var r=require("hermes-core/type-validator"),o=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.PhotoListSubview=e.Base.create(this.name,e.FlickrView,[],{downloadCacheAndSetImage:function(){e.fluid.loadImage(this.get("photoUrl"),{timeout:1e3,retry:!0}).then(function(e){this.handleImageLoad(!0,e)}.bind(this),function(e){this.handleImageLoad(!1,e+"?retry="+Date.now())}.bind(this))},handleImageLoad:function(t,r){var o=this.get("photoContainer");o.setStyle("backgroundImage","url("+r+")"),t||o.setStyle("backgroundColor","#eee"),this.get("model").getValue("needsInterstitial")&&o.addClass("restricted-image"),e.fluid.chill(function(){this.fire(t?"loaded":"loadError")},this)},updateGeometry:function(e){e?this.set("layoutItem",e):e=this.get("layoutItem"),this.updateNodeGeometry(e,this.get("container"))},updateNodeGeometry:function(t,r){YUI.Env.isServer?r.setStyles({transform:"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-webkit-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-ms-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)"}):e.fluid.setStylePrefixed("transform","translate("+t.geometry.left+"px, "+t.geometry.top+"px)",r),t.forcedAspectRatio&&r.addClass("forced-aspect-ratio"),r.setStyles({width:t.geometry.width+"px",height:t.geometry.height+"px"})}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,t){return r.photoId(e)}},layoutItem:{validator:function(e,t){return"object"==typeof e&&e.hasOwnProperty("aspectRatio")&&e.hasOwnProperty("geometry")&&"object"==typeof e.geometry&&e.geometry.hasOwnProperty("width")&&e.geometry.hasOwnProperty("height")&&e.geometry.hasOwnProperty("top")&&e.geometry.hasOwnProperty("left")&&e.hasOwnProperty("isAwake")}},listModelParams:{writeOnce:"initOnly"},photoUrl:{value:"/images/spaceball.gif",getter:function(e,t){var r=this.get("model"),o=this.get("layoutItem");return r.getSizeToFit({width:o.geometry.width*this.get("photoContainerSize"),height:o.geometry.height*this.get("photoContainerSize")},{includeSquare:!1}).url}},linkedPageUrl:{writeOnce:!0,validator:function(t,r){return e.AttributeHelpers.validateString(t)}},model:{value:null},photoContainer:{readOnly:!0,derivedBy:["container"],getter:function(e){return YUI.Env.isServer?(o.warn("Cannot access photoContainer on the server; set values in the template instead. Falling back to view container."),this.get("container")):this.get("container").one(".photo")}},photoContainerSize:{value:1},measureAFT:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","attribute-helpers"],optionalRequires:["fluid"]});YUI.add("hermes-template-pro-badge",function(n,a){var e=n.Template.Handlebars.revive({1:function(n,a,e,l,r){var s;return null!=(s=(e.ifCond||a&&a.ifCond||e.helperMissing).call(null!=a?a:{},null!=a?a.badgeType:a,"===","legacy",{name:"ifCond",hash:{},fn:n.program(2,r,0),inverse:n.program(15,r,0),data:r}))?s:""},2:function(n,a,e,l,r){var s,i=null!=a?a:{};return"\t\t<a "+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.noop,inverse:n.program(3,r,0),data:r}))?s:"")+' class="pro-badge-new pro-badge-legacy'+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.program(5,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(7,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'" title="'+n.escapeExpression((e.intlMessage||a&&a.intlMessage||e.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"common.FLICKR_LOVES_OLD_SCHOOL_PROS"},data:r}))+'">\n'+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(11,r,0),inverse:n.program(13,r,0),data:r}))?s:"")+"\t\t</a>\n"},3:function(n,a,e,l,r){return'href="/account/upgrade/pro"'},5:function(n,a,e,l,r){return" no-link"},7:function(n,a,e,l,r){return" light"},9:function(n,a,e,l,r){var s;return" "+n.escapeExpression("function"==typeof(s=null!=(s=e.extraClasses||(null!=a?a.extraClasses:a))?s:e.helperMissing)?s.call(null!=a?a:{},{name:"extraClasses",hash:{},data:r}):s)},11:function(n,a,e,l,r){return'\t\t\t\t<svg class="icon icon-old-pro-badge"><use xlink:href="#icon-old-pro-badge-colorless"></use></svg>\n'},13:function(n,a,e,l,r){return'\t\t\t\t<svg class="icon icon-old-pro-badge-color"><use xlink:href="#icon-old-pro-badge"></use></svg>\n'},15:function(n,a,e,l,r){var s,i=null!=a?a:{};return"\t\t<a "+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.noop,inverse:n.program(3,r,0),data:r}))?s:"")+' class="pro-badge-new'+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.program(5,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(7,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'">\n\t\t\t<svg class="icon icon-pro-badge"><use xlink:href="#icon-pro-badge"></use></svg>\n\t\t</a>\n'},17:function(n,a,e,l,r){var s;return'\t<a href="/account/upgrade/pro" class="pro-badge-inline'+(null!=(s=e.if.call(null!=a?a:{},null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'">PRO</a>\n'},compiler:[7,">= 4.0.0"],main:function(n,a,e,l,r){var s;return null!=(s=(e.isFlipped||a&&a.isFlipped||e.helperMissing).call(null!=a?a:{},"enable-pro-badge-toggle",{name:"isFlipped",hash:{},fn:n.program(1,r,0),inverse:n.program(17,r,0),data:r}))?s:""},useData:!0}),l={};n.Array.each([],function(a){var e=n.Template.get("hermes/"+a);e&&(l[a]=e)}),n.Template.register("hermes/pro-badge",function(a,r){return r=r||{},r.partials=r.partials?n.merge(l,r.partials):l,e(a,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-comment-item-view",function(t,n){var a=t.Template.Handlebars.revive({1:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t<a class="avatar person tiny no-menu" style="background-image: url('+i(s(null!=(r=null!=(r=null!=n?n.author:n)?r.buddyicon:r)?r.default:r,n))+');" href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/"></a>\n'},3:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t<a class="avatar person tiny no-menu" style="background-image: url('+i(s(null!=(r=null!=n?n.author:n)?r.buddyicon:r,n))+');" href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/"></a>\n'},5:function(t,n,a,e,l){var r,s=t.escapeExpression;return'\t\t\t\t\t<span class="deleted">'+s(t.lambda(null!=(r=null!=n?n.author:n)?r.displayname:r,n))+" ("+s((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"common.DELETED_USER"},data:l}))+")</span>\n"},7:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t\t\t\t\t<a href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/" class="author-name" >'+i(s(null!=(r=null!=n?n.author:n)?r.displayname:r,n))+"</a>\n"},9:function(t,n,a,e,l){var r;return null!=(r=t.invokePartial(e["pro-badge"],n,{name:"pro-badge",hash:{badgeType:null!=(r=null!=n?n.author:n)?r.proBadge:r},data:l,indent:"\t\t\t\t\t",helpers:a,partials:e,decorators:t.decorators}))?r:""},11:function(t,n,a,e,l){return t.escapeExpression((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{time:null!=n?n.time:n,intlName:null!=n?n.intlName:n},data:l}))},13:function(t,n,a,e,l){var r;return null!=(r=a.if.call(null!=n?n:{},null!=n?n.hasEditPrivileges:n,{name:"if",hash:{},fn:t.program(14,l,0),inverse:t.program(16,l,0),data:l}))?r:""},14:function(t,n,a,e,l){return'\t\t\t\t\t\t<a role="button" class="comment-action comment-action-menu-button" data-menutype="owner">\n\t\t\t\t\t\t\t<svg class="icon icon-more_horizontal"><use xlink:href="#icon-more_horizontal"></use></svg>\n\t\t\t\t\t\t</a>\n'},16:function(t,n,a,e,l){var r;return'\t\t\t\t\t\t\t<a role="button" class="comment-action comment-action-reply-button" data-action="reply" data-pathalias="'+t.escapeExpression(t.lambda(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'">\n\t\t\t\t\t\t\t\t<svg class="icon icon-comment_reply"><use xlink:href="#icon-comment_reply"></use></svg>\n\t\t\t\t\t\t\t</a>\n'+(null!=(r=a.if.call(null!=n?n:{},null!=n?n.hasOnlyDeletePrivileges:n,{name:"if",hash:{},fn:t.program(17,l,0),inverse:t.noop,data:l}))?r:"")},17:function(t,n,a,e,l){return'\t\t\t\t\t\t\t\t<a role="button" class="comment-action comment-action-menu-button" data-menutype="curator">\n\t\t\t\t\t\t\t\t\t<svg class="icon icon-more_horizontal"><use xlink:href="#icon-more_horizontal"></use></svg>\n\t\t\t\t\t\t\t\t</a>\n'},19:function(t,n,a,e,l){var r;return'\t\t\t\t\t<a role="button" class="comment-action comment-action-reply-button" data-action="reply" data-pathalias="'+t.escapeExpression(t.lambda(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'">\n\t\t\t\t\t\t<svg class="icon icon-comment_reply"><use xlink:href="#icon-comment_reply"></use></svg>\n\t\t\t\t\t</a>\n'},compiler:[7,">= 4.0.0"],main:function(t,n,a,e,l){var r,s,i=null!=n?n:{},o=a.helperMissing,u=t.escapeExpression;return'<div class="comment-item" data-id="'+u("function"==typeof(s=null!=(s=a.id||(null!=n?n.id:n))?s:o)?s.call(i,{name:"id",hash:{},data:l}):s)+'">\n\n'+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=n?n.author:n)?r.buddyicon:r)?r.default:r,{name:"if",hash:{},fn:t.program(1,l,0),inverse:t.program(3,l,0),data:l}))?r:"")+'\n\t<div class="content-container">\n\t\t<header>\n\t\t\t<div class="author-info">\n'+(null!=(r=a.if.call(i,null!=(r=null!=n?n.author:n)?r.isDeleted:r,{name:"if",hash:{},fn:t.program(5,l,0),inverse:t.program(7,l,0),data:l}))?r:"")+"\n"+(null!=(r=a.if.call(i,null!=(r=null!=n?n.author:n)?r.isPro:r,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l}))?r:"")+'\n\t\t\t\t<span class="comment-date">'+(null!=(r=(a.friendlySinceDate||n&&n.friendlySinceDate||o).call(i,null!=n?n.timeago:n,!0,!1,{name:"friendlySinceDate",hash:{},fn:t.program(11,l,0),inverse:t.noop,data:l}))?r:"")+'</span>\n\t\t\t</div>\n\n\t\t\t<div class="comment-actions">\n'+(null!=(r=a.if.call(i,null!=n?n.isSignedIn:n,{name:"if",hash:{},fn:t.program(13,l,0),inverse:t.program(19,l,0),data:l}))?r:"")+'\n\t\t\t</div>\n\t\t</header>\n\n\t\t<div class="comment-content">'+u((a.renderTrustedMarkupWithLineBreaks||n&&n.renderTrustedMarkupWithLineBreaks||o).call(i,null!=n?n.contentSecure:n,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:l}))+"</div>\n\t</div>\n</div>\n"},usePartial:!0,useData:!0}),e={};t.Array.each(["pro-badge"],function(n){var a=t.Template.get("hermes/"+n);a&&(e[n]=a)}),t.Template.register("hermes/comment-item-view",function(n,l){return l=l||{},l.partials=l.partials?t.merge(e,l.partials):e,a(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-pro-badge"]});YUI.add("comment-item-view",function(e,i){e.namespace("Views")[this.name]=e.Base.create("comment-item-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.isSignedIn=this.appContext.getViewer().signedIn,this.hasEditPrivileges=this.appContext.getViewer().nsid===this.params.author.id,this.hasOnlyDeletePrivileges=this.params.isSubjectOwner},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e={id:this.params.id,author:this.params.author,content:this.params.content,contentSecure:this.params.contentSecure,date:this.params.date,timeago:this.params.timeago,isSignedIn:this.isSignedIn,hasEditPrivileges:this.hasEditPrivileges,hasOnlyDeletePrivileges:this.hasOnlyDeletePrivileges};this.setContainerWithTemplate("comment-item-view",e)}})},"@VERSION@",{requires:["hermes-template-comment-item-view"],langBundles:["common","relative-dates"]});YUI.add("hermes-template-add-comment-view",function(n,a){var e=n.Template.Handlebars.revive({1:function(n,a,e,t,l){var r,s,i=null!=a?a:{},u=e.helperMissing,o=n.escapeExpression;return'<div class="comment-area" tabindex="-1">\n'+(null!=(r=e.if.call(i,null!=a?a.signedIn:a,{name:"if",hash:{},fn:n.program(2,l,0),inverse:n.program(7,l,0),data:l}))?r:"")+'\n\t<div class="text-area-container">\n\t\t<textarea placeholder="'+o("function"==typeof(s=null!=(s=e.placeholderText||(null!=a?a.placeholderText:a))?s:u)?s.call(i,{name:"placeholderText",hash:{},data:l}):s)+'" class="comment-field" tabindex="0"></textarea>\n\t\t<div class="comment-arrow"></div>\n\t</div>\n</div>\n<div class="buttons comment-buttons hidden">\n\t<button type="button" class="action comment-button">'+o((e.intlMessage||a&&a.intlMessage||u).call(i,{name:"intlMessage",hash:{intlName:"gallery.ADD_COMMENT"},data:l}))+"</button>\n</div>\n"},2:function(n,a,e,t,l){var r;return null!=(r=e.if.call(null!=a?a:{},null!=(r=null!=(r=null!=a?a.user:a)?r.buddyicon:r)?r.default:r,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.program(5,l,0),data:l}))?r:""},3:function(n,a,e,t,l){var r,s=n.lambda,i=n.escapeExpression;return'\t\t\t<a class="avatar person tiny no-menu" style="background-image: url('+i(s(null!=(r=null!=(r=null!=a?a.user:a)?r.buddyicon:r)?r.default:r,a))+');" href="/photos/'+i(s(null!=(r=null!=a?a.user:a)?r.pathAlias:r,a))+'/"></a>\n'},5:function(n,a,e,t,l){var r,s=n.lambda,i=n.escapeExpression;return'\t\t\t<a class="avatar person tiny no-menu" style="background-image: url('+i(s(null!=(r=null!=a?a.user:a)?r.buddyicon:r,a))+');" href="/photos/'+i(s(null!=(r=null!=a?a.user:a)?r.pathAlias:r,a))+'/"></a>\n'},7:function(n,a,e,t,l){return'\t\t<a class="avatar person tiny no-menu signed-out-icon" style="background-image: url(https://combo.staticflickr.com/pw/images/buddyicon04_m.png);"></a>\n'},9:function(n,a,e,t,l){var r=null!=a?a:{},s=e.helperMissing;return'<div class="comments-disabled-container">\n\t<span>'+n.escapeExpression((e.preventOrphans||a&&a.preventOrphans||s).call(r,(e.intlMessage||a&&a.intlMessage||s).call(r,{name:"intlMessage",hash:{intlName:"comments.COMMENTING_DISABLED"},data:l}),{name:"preventOrphans",hash:{},data:l}))+"</span>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(n,a,e,t,l){var r;return null!=(r=e.if.call(null!=a?a:{},null!=a?a.commentingEnabled:a,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.program(9,l,0),data:l}))?r:""},useData:!0}),t={};n.Array.each([],function(a){var e=n.Template.get("hermes/"+a);e&&(t[a]=e)}),n.Template.register("hermes/add-comment-view",function(a,l){return l=l||{},l.partials=l.partials?n.merge(t,l.partials):t,e(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("add-comment-view",function(e,t){var n=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.config=this.params.addCommentConfig,this.signedIn=this.appContext.getViewer().signedIn,this.commentingEnabled=!0,this.addCommentText=this.config.addCommentText||this.intlMessage({intlName:"comments.ADD_A_COMMENT"})},loadState:function(){var t=this,n=[this.appContext.getModelRegistry(this.config.commentModelRegistryName).then(function(e){t.commentModelRegistry=e})];return this.signedIn&&n.push(this.appContext.getModel("person-models",{id:this.appContext.getViewer().nsid}).then(function(e){t.userModel=e})),this.config.galleryId&&n.push(this.appContext.getModel("gallery-info-models",{id:this.config.galleryId}).then(function(e){t.galleryInfoModel=e})),this.params.photoId&&n.push(this.appContext.getModel("photo-models",{id:this.params.photoId}).then(function(e){t.photoModel=e,t.commentingEnabled=!t.signedIn||t.photoModel.getValue("canComment")})),e.Promise.all(n)},buildContainer:function(){this.setContainerWithTemplate("add-comment-view",{user:this.signedIn?this.userModel.toJSON():null,signedIn:this.signedIn,placeholderText:this.getPlaceholderText(),commentingEnabled:this.commentingEnabled})},activate:function(){var t=this.get("container");this.commentButton=t.one(".comment-button"),this.commentField=t.one(".comment-field"),this.commentButtonsContainer=t.one(".buttons.comment-buttons"),this.signedIn||(this.signedOutIcon=t.one(".signed-out-icon"),this.registerEventHandler(this.signedOutIcon.on("mousedown",this.handleCommentFocus.bind(this)))),this.commentingEnabled&&(this.registerEventHandler(this.commentButton.on("click",this.handleAddCommentClick.bind(this))),this.registerEventHandler(this.commentField.on("focus",this.handleCommentFocus.bind(this))),this.registerEventHandler(e.on("click",this.handleContainerClick.bind(this))),t.ancestor(".fluid-droparound-view")&&setTimeout(function(){t.one(".comment-area").focus()},0))},getPlaceholderText:function(){return this.signedIn?this.config.addCommentText:"en-us"===this.appContext.lang.toLowerCase()?this.intlMessage({intlName:"comments.LOGIN_TO_COMMENT"}):this.config.addCommentText},handleAddCommentClick:function(e){this.addComment(this.commentField.get("value"))},addComment:function(t){var i=this;if(t)return this.commentField.set("value",""),this.commentButton.setAttribute("disabled"),this.commentField.removeClass("focused"),this.commentButtonsContainer.addClass("hidden"),this.fakeAddComment=function(){return e.Promise.resolve({comment:{id:"72157688007210754-tmpp",content:t,contentSecure:t},stat:"ok"})},i.fire("subviewViewEvent",{eventName:"commentAddLoading",isLoading:!0}),this.addCommentCall(t).then(function(e){i.fire("subviewViewEvent",{eventName:"commentAdded",commentModel:e}),i.commentButton.removeAttribute("disabled")}).catch(function(e){i.commentButton.removeAttribute("disabled"),i.fire("subviewViewEvent",{eventName:"commentAddLoading",isLoading:!1}),n.error("Error adding gallery comment",{err:e})})},addCommentCall:function(e){return"gallery"===this.params.addCommentConfig.type?this.addGalleryComment(e):"photo"===this.params.addCommentConfig.type?this.addPhotoComment(e):void 0},handleCommentFocus:function(e){this.signedIn?(this.commentField.addClass("focused"),this.commentButtonsContainer.removeClass("hidden")):(e&&e.preventDefault(),this.showSignUpModal())},addReplyMessage:function(t,n){var i="",o=this.commentField.get("value");this.signedIn?(o.length>0&&(i+=o+" "),i+="["+e.url("/photos/"+t)+"] ",this.handleCommentFocus(!0),this.commentField.focus(),this.commentField.set("value",i),n&&this.commentField.scrollIntoView()):this.showSignUpModal()},showSignUpModal:function(){var t,n=e.config.win.location.href,i=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_COMMENT_TITLE"}),o=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_COMMENT_MESSAGE"});e.fire("addComment:showingSignupModal"),(t=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:i,signUpMessage:o,beaconPrefix:"addComment"})).on("signUpClick",function(t){e.SigninHelper._redirectToSignUp("",{postLoginUrl:n})}),t.on("signInClick",function(t){e.SigninHelper._redirectToSignin("",{postLoginUrl:n})}),t.show()},handleContainerClick:function(e){this.checkCommentUnfocus(e)},checkCommentUnfocus:function(e){var t=e.target;t.ancestor(".add-comment-view",!0)||t.ancestor(".comment-action-reply-button",!0)||(this.commentButtonsContainer.addClass("hidden"),this.commentField.removeClass("focused"))},addGalleryComment:function(e){return this.commentModelRegistry.remoteCreate({galleryId:this.galleryInfoModel.getValue("id"),galleryOwnerId:this.galleryInfoModel.getValue("owner").getValue("id"),commentText:e,authorId:this.userModel.getValue("id")})},addPhotoComment:function(e){return this.commentModelRegistry.remoteCreate({photoId:this.params.photoId,commentText:e})},focusCommentBox:function(){this.commentField&&this.commentField.focus()}})},"@VERSION@",{requires:["flickr-view","signup-modal-view","hermes-template-add-comment-view"],langBundles:["gallery","photo-page-scrappy","stats","comments","common"]});YUI.add("hermes-lang-stats_ko-kr",function(E,_){E.Intl.add("hermes/stats","ko-KR",{STATS:["통계"],NUMBER:[{type:"number",valueName:"num"}],NUMBER_VIEWS:["조회 ",{type:"number",valueName:"num"},"회"],NUMBER_FAVES:["좋아요 ",{type:"number",valueName:"num"},"개"],NUMBER_COMMENTS:["덧글 ",{type:"number",valueName:"num"},"개"],VIEW_COUNTS:["조회수"],SO_FAR_TODAY:["오늘까지"],SO_FAR_TODAY_DOT_DOT_DOT:["오늘까지..."],YESTERDAY:["어제"],ALL_TIME:["누적"],PHOTOS_AND_VIDEOS:["사진 및 동영상"],PHOTOS:["사진"],VIDEOS:["동영상"],PHOTOSTREAM:["포토스트림"],ALBUMS:["앨범"],COLLECTIONS:["컬렉션"],GALLERIES:["갤러리"],TOTAL:["합계"],TOP_PHOTOS_AND_VIDEOS:["최고의 사진 및 동영상"],CONTENT_BREAKDOWN:["콘텐츠 분석<span>(항목 ",{type:"number",valueName:"num"},"개)</span>"],VIEWS:["뷰"],ALL_TIME_VIEWS:["누적 조회"],ALL_TIME_FAVES:["최고의 좋아요"],ALL_TIME_COMMENTS:["최고의 댓글"],DATE:["날짜"],INTERESTINGNESS:["흥미"],FAVORITES:["즐겨찾기"],COMMENTS:["덧글"],RECENT_VIEWS:["최근 조회"],RECENT_FAVES:["최근 좋아요"],RECENT_COMMENTS:["최근 덧글"],BACK_TO_STATS:["통계로 이동"],SOURCE_BREAKDOWN:["소스 분석"],ALL_PHOTO_AND_VIDEOS_LINK:["모든 사진 및 동영상"],VISITS:["방문"],PRO_UNTIL_DATE:["${date}"," 까지 PRO"],PRO_SINCE_DATE:["${date}"," 이후 PRO"],PRO_SINCE_MONTHYEAR:[{type:"date",valueName:"intlDate",format:"monthYear"}," 이후 PRO"],PRO_UNTIL_MONTHYEAR:["PRO 기한: ",{type:"date",valueName:"intlDate",format:"monthYear"}],LEARN_MORE:["자세히 알아보기"],CURRENT_STATS_DATE:["통계는 GMT로 표시되며 현재 ","${date}"," ","${time}","입니다."],CURRENT_STATS_LONGDATE:["통계는 GMT로 표시되며 현재 ",{type:"date",valueName:"intlDate",format:"long"}," ","${time}","입니다"],SPACE_USED_LIMITED:["${total}","개 중 ","${used}","개 사용"],SPACE_USED_UNLIMITED:["무제한 중 ","${used}","개 사용"],PUBLIC:["공개"],FRIENDS:["친구"],FAMILY:["가족"],FF:["친구 및 가족"],PRIVATE:["비공개"],TAGGED:["태그 지정됨"],GEOTAGGED:["위치 태그 지정됨"],IN_ALBUMS:["앨범에"],IN_GROUPS:["그룹에"],VIEWED:["조회됨"],FAVED:["좋아요 받음"],COMMENTED:["덧글 입력됨"],NO_SOURCES_TODAY:["이날에 대한 소스 없음"],NO_VIEWS_TODAY:["오늘 조회된 사진 없음"],PERCENTAGE_OF_VIEWS:[{type:"number",valueName:"num"},"%의 조회"],PERCENTAGE_OF_FAVES:[{type:"number",valueName:"num"},"%의 좋아요"],PERCENTAGE_OF_COMMENTS:[{type:"number",valueName:"num"},"%의 덧글"],TODAY:["오늘"],SOURCES:["소스"],LOAD_MORE:["더 많이 로드"],NEXT:["다음"],PREVIOUS:["이전"],MEDIA:["미디어"],VISIBILITY:["표시 여부"],ALPHA_LABEL:["통계 알파"],BETA_LABEL:["통계 베타"],SHOW_ALL:["모두 표시"],PHOTO_STATS:["사진 통계"],EXPAND_ALL:["모두 확장"],COLLAPSE_ALL:["모두 접기"],NO_PHOTO_STATS_AVAILABLE:["이 사진에 대해 사용할 수 있는 통계 없음"],NO_RECENT_PHOTO_STATS_AVAILABLE:["이 사진에 대해 사용할 수 있는 최근 통계 없음"],WELCOME_TO_STATS:["통계 시작"],WELCOME_MODAL_SCREEN_1:["데이터를 언제나 쉽게 보세요"],WELCOME_MODAL_SCREEN_2:["더욱 강력한 탐색"],WELCOME_MODAL_SCREEN_3:["더욱 유의미한 데이터, 카테고리, 소셜 소스"],WELCOME_MODAL_SCREEN_2_QUICK:["향상된 탐색 기능을 통한 신속한 데이터 액세스"],WORKING_ON_IT:["이 작업을 하고 있습니다."],STATS_LOADING:["현재 통계를 표시하는 데 문제가 있습니다. 다시 시도해 주세요."],"404_STATS_ONLY_YOU":["죄송합니다. 다른 사람의 통계를 볼 수 없습니다."]})},"@VERSION@",{requires:["intl"]});